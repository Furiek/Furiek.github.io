---
title: 1. Animals-10 picture classifier
layout: page
---

<input id="photo" type="file">
<div id="results"></div>
<script>
  async function loaded(file) {
    try {
      const formData = new FormData();
      formData.append('data', file);

      const response = await fetch('https://furiek-animal-detector.hf.space/api/predict', {
        method: "POST",
        body: formData
      });

      if (!response.ok) {
        throw new Error(`HTTP error! status: ${response.status}`);
      }

      const json = await response.json();
      // Gradio's new format returns the prediction in data
      const data = json.data[0];
      
      const confidenceDetails = Object.entries(data)
        .map(([label, confidence]) => 
          `<li>${label}: ${(confidence * 100).toFixed(2)}%</li>`
        )
        .join("");

      results.innerHTML = `
        <br/>
        <img src="${URL.createObjectURL(file)}" width="300">
        <ul>${confidenceDetails}</ul>
      `;
    } catch (error) {
      console.error("Error using the API:", error);
      results.innerHTML = `<p style="color: red;">Error processing image: ${error.message}</p>`;
    }
  }

  const photoInput = document.getElementById('photo');
  if (photoInput) {
    photoInput.addEventListener('input', (event) => {
      const file = event.target.files[0];
      if (file) {
        loaded(file);
      }
    });
  }
</script>