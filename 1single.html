---
title: 1. Animals-10 picture classifier
layout: page
---
<input id="photo" type="file">
    <div id="results"></div>
    <script>
        async function loaded(reader) {
            try {
                // image object for the new API
                const imgPayload = {
                    url: reader.result,
                    is_stream: false,
                    meta: {},
                };

                // POST request to the new API
                const response = await fetch('https://hf.space/embed/Furiek/animal_detector/api/predict/', {
                    method: "POST",
                    body: JSON.stringify({ img: imgPayload }),
                    headers: { "Content-Type": "application/json" },
                });

                const json = await response.json();

                // Extract label and confidence from the response
                const label = json?.label || "Unknown";
                const confidences = json?.confidences || [];
                const confidenceDetails = confidences
                    .map(conf => `<li>${conf.label}: ${(conf.confidence * 100).toFixed(2)}%</li>`)
                    .join("");

                // Display the results
                results.innerHTML = `
                    <br/>
                    <img src="${reader.result}" width="300">
                    <p><strong>Label:</strong> ${label}</p>
                    <ul>${confidenceDetails}</ul>
                `;
            } catch (error) {
                console.error("Error using the API:", error);
                results.innerHTML = `<p style="color: red;">An error occurred while classifying the image.</p>`;
            }
        }

        function read() {
            const reader = new FileReader();
            reader.addEventListener('load', () => loaded(reader));
            reader.readAsDataURL(photo.files[0]);
        }

        photo.addEventListener('input', read);
    </script>